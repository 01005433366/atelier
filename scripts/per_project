#!python
import os
import sys
import subprocess

# TODO: make these configurable:
PROJECTS = 'atelier site north lino welfare'.split()
PROJECTS_HOME = '/home/luc/hgwork'

def main():
    for prj in PROJECTS:
        print "==== %s ====" % prj
        p = os.path.join(PROJECTS_HOME,prj)
        os.chdir(p)
        args = ["fab"]
        args += sys.argv[1:]
        rv = subprocess.call(args,cwd=p)
        if rv: return rv
    return 0
        
if __name__ == '__main__':
    sys.exit(main())
    
